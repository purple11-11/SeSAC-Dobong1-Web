<!DOCTYPE html>
<html lang="en">
  <%-include('include/include', {title: "ë¡œê·¸ì¸"})%>
  <body>
    <h1>ë¡œê·¸ì¸</h1>
    <form action="/profile" method="POST" name="form_info">
      <input type="hidden" name="userid" />
    </form>
    <form name="form_login">
      <label for="userid">ID</label>
      <input type="text" name="userid" required />
      <br />
      <label for="pw">Password</label>
      <input type="password" name="pw" id="pw" required />
      <br />
      <button type="button" onclick="login()">ë¡œê·¸ì¸</button>
    </form>
    <a href="/">HOME</a>
    <a href="/signup">íšŒì›ê°€ì…</a>

    <script>
      function login() {
        const form = document.forms["form_login"];
        const formInfo = document.forms["form_info"];

        // ìœ íš¨ì„± ì²´í¬
        if (!form.checkValidity()) {
          form.reportValidity();
          return;
        }

        axios({
          method: "post",
          url: "/signin",
          data: {
            userid: form.userid.value,
            pw: form.pw.value,
          },
        }).then((res) => {
          // console.log(res.data); // true || false
          if (res.data) {
            alert("ë¡œê·¸ì¸ ì„±ê³µ!ğŸ˜");
            formInfo.userid.value = form.userid.value;
            formInfo.submit(); // /profileë¡œ post ìš”ì²­ ë³´ë‚´ê¸°
          } else {
            alert("ë¡œê·¸ì¸ ì‹¤íŒ¨!ğŸ˜¥ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.");
            form.reset();
          }
        });
      }
    </script>
  </body>
</html>
